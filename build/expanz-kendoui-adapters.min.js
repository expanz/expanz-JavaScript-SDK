function useKendo(){expanz.UIplugin="kendo",renderKendoComponents(),useKendoPopups(),window.expanz.views.ContextMenuView.prototype.createContextMenu=function(){this.contextMenuEl.find("ul").kendoMenu({orientation:"vertical"}),this.contextMenuEl.show()}}function renderKendoComponents(n){n===undefined&&(n=$("body")),n.find("[renderingType=combobox]").length>0&&n.find("[renderingType=combobox]").each(function(){$(this).KendoComboBoxAdapter()}),n.find("[renderingType=dropdownlist]").length>0&&n.find("[renderingType=dropdownlist]").each(function(){$(this).KendoDropDownListAdapter()}),n.find("[renderingType=datepicker]").length>0&&n.find("[renderingType=datepicker]").each(function(){$(this).KendoDatePickerAdapter()}),n.find("[renderingType=timepicker]").length>0&&n.find("[renderingType=timepicker]").each(function(){$(this).KendoTimePickerAdapter()}),n.find("[bind=menu] > ul.menu").length>0&&n.find("[bind=menu] > ul.menu").each(function(){$(this).kendoMenu()}),n.find("[renderingType=numerictextbox]").length>0&&n.find("[renderingType=numerictextbox]").each(function(){$(this).kendoNumericTextBox({min:1,max:99,step:1,format:"n0"})})}function useKendoMobile(){expanz.UIplugin="kendoMobile"}function useKendoPopups(){window.expanz.views.PopupView.prototype.createWindowObject=function(){var t=this,n;this.$el.kendoWindow({visible:!0,title:this.model.get("title")?this.model.get("title"):"",modal:!0,width:this.width,close:function(){t.close()}}),n=this.$el,this.$el.data("kendoWindow").bind("open",function(){n.parent().find(".k-window-title").html(n.parent().find(".k-window-title").text())})},window.expanz.views.PopupView.prototype.close=function(){this.$el.data("kendoWindow")&&this.$el.data("kendoWindow").destroy(),this.onCloseWindow()},window.expanz.views.PopupView.prototype.center=function(){this.$el.data("kendoWindow").center(),this.$el.data("kendoWindow").open()}}function createActivityWithKendoTabs(n,t,i){for(var u=[],f=t.length,e,r=0;r<f;r++)t[r]=getPageUrl(t[r]);e=function(n){var t=n.item.innerText||n.item.textContent;u[t]=!0,Object.size(u)==f&&(addPlaceHolderCapabilities(),u=[],expanz.CreateActivity($(n.item).parents("[bind=activity]"),i))},$(n).kendoTabStrip({contentUrls:t,contentLoad:e}),_.each(n.data("kendoTabStrip").tabGroup.children().not("[class*=k-state-active]").not("[class*=k-tab-on-top]"),function(t){n.data("kendoTabStrip").reload($(t))})}$.fn.KendoComboBoxAdapter=function(){var n=$(this).kendoComboBox({dataTextField:"text",dataValueField:"value"}),t=n.data("kendoComboBox"),i=function(i,r){var u=[],f;emptyItemLabel!==null&&u.push({text:emptyItemLabel,value:emptyItemValue}),r.rows.each(function(n){var t=n.get("id");n.cells.each(function(n){u.push({text:n.get("value"),value:t===0?n.get("value"):t})})}),f=new kendo.data.DataSource({data:u}),t.dataSource=f,f.read(),t.refresh(),n.val()!==undefined&&t.value(n.val())},r=function(n,i){t.value(i)};n.bind("valueUpdated",r),n.bind("publishData",i)},$.fn.KendoDatePickerAdapter=function(){var n=$(this).kendoDatePicker({format:"dd/MM/yyyy"})},$.fn.KendoDropDownListAdapter=function(){var i=$(this),n=i.kendoDropDownList({dataTextField:"text",dataValueField:"value"}),t=n.data("kendoDropDownList"),r=null,u="";i.attr("emptyItemLabel")!==undefined&&(r=i.attr("emptyItemLabel")),i.attr("emptyItemValue")!==undefined&&(u=i.attr("emptyItemValue"));var f=function(i,f){var e=[],o;r!==null&&e.push({text:r,value:u}),f.rows.each(function(n){var t=n.get("id");n.cells.each(function(n){e.push({text:n.get("value"),value:t===0?n.get("value"):t})})}),o=new kendo.data.DataSource({data:e}),t.dataSource=o,o.read(),t.refresh(),n.val()!==undefined&&t.value(n.val())},e=function(n,i){(i===null||i===undefined)&&(i=u),t.value(i)},o=function(n,i){i!==undefined&&i!==null&&i!==""?t._focused.addClass("kendoErrorField"):t._focused.removeClass("kendoErrorField"),n.preventBubble=!0},s=function(n,i){t.enable(!i)},h=function(){};n.bind("publishData",f),n.bind("valueUpdated",e),n.bind("disabledChanged",s),n.bind("visibilityChanged",h),n.bind("errorChanged",o)},$.fn.KendoMobileListAdapter=function(n){var e=$(this),i=!0,t="title",r="id",u=null,o=function(n,t,r){(i||r)&&n.itemSelected(t,u)},f;n&&(n.labelAttribute!==undefined&&(t=n.labelAttribute),n.idAttribute!==undefined&&(r=n.idAttribute),n.selectionCallback!==undefined&&(u=n.selectionCallback),n.onSelection!==undefined&&(o=n.onSelection),n.parentSelectable!==undefined&&(i=n.parentSelectable)),f=function(n,i){var f,u,o,h,s;window.expanz.logToConsole("KendoMobileListAdapter publishData"),$("head").find("#${name}")||($(i).find("Columns").length>0&&(f=$(i).find("Columns")),f!==undefined&&(u="<script type='text/template' id='${name}'><tr class='item listDisplay'",o=0,_.each($(f).children(),function(n){o++,$(n).attr("width")>0&&(u+="<td><%=data["+o+"]%><\/td>")}),u+="<\/tr><\/script>",$("head").append(u))),s=[],$(i).find("Rows").length>0&&(h=$(i).find("Rows")),_.each($(h).children(),function(n){_.each($(n).children(),function(i){s.push({name:$(i).attr(t),category:$(n).attr(t),id:$(i).attr(r)})})}),e.kendoMobileListView({dataSource:kendo.data.DataSource.create({data:s,group:"category"}),template:"${name}",click:function(n){window.expanz.logToConsole(n.dataItem.id)}})},$(this).bind("publishData",f)},$.fn.KendoPanelBarAdapter=function(n){var t=$(this),e=!0,i="title",o="id",s=!0,r={},h=null,a=t.attr("fieldname"),c=null,u=null,f=function(n,t,i){(e||i)&&expanz.net.DeltaRequest(a,t,h.get("parent"),c)},l;n&&(n.labelAttribute!==undefined&&(i=n.labelAttribute),n.idAttribute!==undefined&&(o=n.idAttribute),n.selectionCallback!==undefined&&(c=n.selectionCallback),n.onSelection!==undefined&&(f=n.onSelection),n.parentSelectable!==undefined&&(e=n.parentSelectable),n.expandedOnLoad!==undefined&&(s=n.expandedOnLoad),n.runAfterPublish!==undefined&&(u=n.runAfterPublish),n.staticElements!==undefined&&(r=n.staticElements)),l=function(n,e,c,l){h=e;var y=e.$rawXml,v=y,a=[],p="";v.find("Rows").length>0&&(v=v.find("Rows")),_.each(v.children(),function(n){var r={text:$(n).attr(i),expanded:s,allAttributes:$(n).getAttributes()},t=[];_.each($(n).children(),function(n){p=n.tagName,t.push({text:$(n).attr(i),value:$(n).attr(o),allAttributes:$(n)})}),t.length>0&&(t.sort(getObjectSortAscendingFunction("text")),r.items=t),a.push(r)}),a.sort(getObjectSortAscendingFunction("text")),_.each(r,function(n){n.position!==undefined&&n.position=="end"?a.push({text:$(n).attr("label")}):a.unshift({text:$(n).attr("label")})}),t.kendoPanelBar({dataSource:a}),t.children("li").addClass("level1"),t.children("li").find("ul").children("li").addClass("level2"),t.data("kendoPanelBar").bind("select",function(n){var u=n.item.firstChild.textContent||n.item.firstChild.innerText,e=!1,t;r.length>0&&_.each(r,function(n){u===n.label&&(e=!0,expanz.net.MethodRequest(n.method,[{name:"contextObject",value:n.contextObject}],null,c.model.get("parent")))}),e||(y.find("["+i+"]").each(function(){u===$(this).attr(i)&&(t=$(this))}),f&&f(c,t.attr("id"),t.is(p)))}),u&&u(y),$(this).trigger("dataPublished"),l.handled=!0},$(this).bind("datapublication:publishData",l)},$.fn.KendoTimePickerAdapter=function(){var n=this.attr("timeFormat")!==undefined?this.attr("timeFormat"):window.config.timeFormat,t;n===undefined&&(n=12),t=$(this).kendoTimePicker({format:n==12?"h:mm tt":"H:mm"})},$.fn.KendoTreeAdapter=function(n){var t=$(this),l=!0,i="title",a="id",e=!0,r=[],o=!0,u={},y=null,s=null,h=null,p={success:function(){h&&h.call()}},c=function(n,t,i){!l&&!i},w={show:function(n){if(o){var r="LoadingTree_"+t.attr("id"),i=$(n).find("#"+r);i.length===0&&($(n).append('<div class="loading" id="'+r+'"><span> <\/span><\/div>'),i=$(n).find("#"+r)),i.css("position","absolute"),i.css("width","100%"),i.css("height","100%"),i.css("margin","0"),i.css("padding","0"),i.css("top","0px"),i.css("left","0px"),i.css("z-index","999"),i.css("overflow","hidden"),i.css("background","url(data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==) center"),i.show(),t.addClass("treeSelectionLoading")}},hide:function(){if(o){t.removeClass("treeSelectionLoading");var i="LoadingTree_"+t.attr("id"),n=$(t).find("#"+i);n&&n.hide()}}},f=function(n,i,r){var u,f;i instanceof Array&&(i=str.join("|")),i===null||i===""?u=r:(f=new RegExp(i,"i"),u=[],_.each(r,function(n){var t={},i;t.text=n.text,t.expanded=n.expanded,i=[],_.each(n.items,function(n){n.text.match(f)&&i.push(n)}),i.length>0&&(t.items=i,u.push(t))})),t.html(""),t.removeClass("k-widget k-treeview k-reset"),t.kendoTreeView({dataSource:u})};n&&(n.labelAttribute!==undefined&&(i=n.labelAttribute),n.idAttribute!==undefined&&(a=n.idAttribute),n.selectionCallback!==undefined&&(h=n.selectionCallback),n.onSelection!==undefined&&(c=n.onSelection),n.parentSelectable!==undefined&&(l=n.parentSelectable),n.expandedOnLoad!==undefined&&(e=n.expandedOnLoad),n.filteringInput!==undefined&&(r=n.filteringInput),n.runAfterPublish!==undefined&&(s=n.runAfterPublish),n.filterData!==undefined&&(f=n.filterData),n.displayLoading!==undefined&&(o=n.displayLoading),n.staticElements!==undefined&&(u=n.staticElements));var v=function(n){var t=[];return _.each($(n).children(),function(n){var u={text:$(n).attr(i),value:$(n).attr(a),allAttributes:$(n).getAttributes(),expanded:e},r;$(n).attr("Type")=="parent"&&(r=v(n),r.length>0&&(u.items=r)),t.push(u)}),t},b=function(n){var t={text:$(n).attr(i),expanded:e,allAttributes:$(n).getAttributes()},r=v(n);return r.length>0&&(t.items=r),t},k=function(n,e,o,h){var d,g;y=e;var v=e.$rawXml,a=v,l=[],k="";a.find("Rows").length>0&&(a=a.find("Rows")),_.each(a.children(),function(n){var t=b(n);k=n.tagName,l.push(t)}),_.each(u,function(n){n.position!==undefined&&n.position=="end"?l.push({text:$(n).attr("label")}):l.unshift({text:$(n).attr("label")})}),t.kendoTreeView({dataSource:l}),t.data("kendoTreeView").bind("select",function(n){var f=n.node.firstChild.textContent||n.node.firstChild.innerText,s=!1,r;u.length>0&&_.each(u,function(n){f===n.label&&(s=!0,expanz.net.MethodRequest(n.method,[{name:"contextObject",value:n.contextObject}],null,e.get("parent")),$(t).trigger("TreeSelectionChanged",{id:"static",text:f}))}),s||(v.find("["+i+"]").each(function(){f===$(this).attr(i)&&(r=$(this))}),c&&c(o,r.attr("id"),!r.is(k),p,w),$(t).trigger("TreeSelectionChanged",{id:r.attr("id"),text:f,parentId:r.parent().attr("id"),parentText:r.parent().attr(i)}))}),r&&r.length>0&&(d=function(n){f(n,$(this).val(),l)},g=function(n){f(n,$(this).attr("filter"),l)},_.each(r,function(n){$(n).is("input")?($(n).val(""),$(n).bind("change",d)):$(n).is("button")&&$(n).bind("click",g)})),s&&s(v),h.handled=!0};$(this).bind("datapublication:publishData",k),$(this).bind("filterData",f)};
//@ sourceMappingURL=expanz-kendoui-adapters.min.js.map