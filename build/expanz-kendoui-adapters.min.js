function useKendo(){expanz.UIplugin="kendo",renderKendoComponents(),useKendoPopups(),window.expanz.views.ContextMenuView.prototype.createContextMenu=function(){this.contextMenuEl.find("ul").kendoMenu({orientation:"vertical"}),this.contextMenuEl.show()}}function renderKendoComponents(n){n===undefined&&(n=$("body")),n.find("[renderingType=combobox]").length>0&&n.find("[renderingType=combobox]").each(function(){$(this).KendoComboBoxAdapter()}),n.find("[renderingType=dropdownlist]").length>0&&n.find("[renderingType=dropdownlist]").each(function(){$(this).KendoDropDownListAdapter()}),n.find("[renderingType=datepicker]").length>0&&n.find("[renderingType=datepicker]").each(function(){$(this).KendoDatePickerAdapter()}),n.find("[renderingType=timepicker]").length>0&&n.find("[renderingType=timepicker]").each(function(){$(this).KendoTimePickerAdapter()}),n.find("[bind=menu] > ul.menu").length>0&&n.find("[bind=menu] > ul.menu").each(function(){$(this).kendoMenu()}),n.find("[renderingType=numerictextbox]").length>0&&n.find("[renderingType=numerictextbox]").each(function(){$(this).kendoNumericTextBox({min:1,max:99,step:1,format:"n0"})})}function useKendoMobile(){expanz.UIplugin="kendoMobile"}function useKendoPopups(){window.expanz.views.PopupView.prototype.createWindowObject=function(){var t=this,n;this.$el.kendoWindow({visible:!0,title:this.model.get("title")?this.model.get("title"):"",modal:!0,width:this.width,close:function(){t.close()}}),n=this.$el,this.$el.data("kendoWindow").bind("open",function(){n.parent().find(".k-window-title").html(n.parent().find(".k-window-title").text())})},window.expanz.views.PopupView.prototype.close=function(){this.$el.data("kendoWindow")&&this.$el.data("kendoWindow").destroy(),this.onCloseWindow()},window.expanz.views.PopupView.prototype.center=function(){this.$el.data("kendoWindow").center(),this.$el.data("kendoWindow").open()}}function createActivityWithKendoTabs(n,t,i){for(var u=[],f=t.length,e,r=0;r<f;r++)t[r]=getPageUrl(t[r]);e=function(n){var t=n.item.innerText||n.item.textContent;u[t]=!0,Object.size(u)==f&&(addPlaceHolderCapabilities(),u=[],expanz.CreateActivity($(n.item).parents("[bind=activity]"),i))},$(n).kendoTabStrip({contentUrls:t,contentLoad:e}),_.each(n.data("kendoTabStrip").tabGroup.children().not("[class*=k-state-active]").not("[class*=k-tab-on-top]"),function(t){n.data("kendoTabStrip").reload($(t))})}$.fn.KendoComboBoxAdapter=function(){var n=$(this).kendoComboBox({dataTextField:"text",dataValueField:"value"}),t=n.data("kendoComboBox"),i=function(i,r){var f=[],u;_.each($(r).find("Row"),function(n){var t=$(n).attr("id");_.each($(n).find("Cell"),function(n){f.push({text:$(n).text(),value:t===0?$(n).text():t})})}),u=new kendo.data.DataSource({data:f}),t.dataSource=u,u.read(),t.refresh(),n.val()!==undefined&&t.value(n.val())},r=function(n,i){t.value(i)};n.bind("valueUpdated",r),n.bind("publishData",i)},$.fn.KendoDatePickerAdapter=function(){var n=$(this).kendoDatePicker({format:"dd/MM/yyyy"})},$.fn.KendoDropDownListAdapter=function(){var i=$(this),n=i.kendoDropDownList({dataTextField:"text",dataValueField:"value"}),t=n.data("kendoDropDownList"),r=null,u="";i.attr("emptyItemLabel")!==undefined&&(r=i.attr("emptyItemLabel")),i.attr("emptyItemValue")!==undefined&&(u=i.attr("emptyItemValue"));var f=function(i,f){var e=[],o;r!==null&&e.push({text:r,value:u}),_.each($(f).find("Row"),function(n){var t=$(n).attr("id");_.each($(n).find("Cell"),function(n){e.push({text:$(n).text(),value:t===0?$(n).text():t})})}),o=new kendo.data.DataSource({data:e}),t.dataSource=o,o.read(),t.refresh(),n.val()!==undefined&&t.value(n.val())},e=function(n,i){(i===null||i===undefined)&&(i=u),t.value(i)},o=function(n,i){i!==undefined&&i!==null&&i!==""?t._focused.addClass("kendoErrorField"):t._focused.removeClass("kendoErrorField"),n.preventBubble=!0},s=function(n,i){t.enable(!i)},h=function(){};n.bind("publishData",f),n.bind("valueUpdated",e),n.bind("disabledChanged",s),n.bind("visibilityChanged",h),n.bind("errorChanged",o)},$.fn.KendoMobileListAdapter=function(n){var e=$(this),i=!0,t="title",r="id",u=null,o=function(n,t,r){(i||r)&&n.itemSelected(t,u)},f;n&&(n.labelAttribute!==undefined&&(t=n.labelAttribute),n.idAttribute!==undefined&&(r=n.idAttribute),n.selectionCallback!==undefined&&(u=n.selectionCallback),n.onSelection!==undefined&&(o=n.onSelection),n.parentSelectable!==undefined&&(i=n.parentSelectable)),f=function(n,i){var f,u,o,h,s;window.expanz.logToConsole("KendoMobileListAdapter publishData"),$("head").find("#${name}")||($(i).find("Columns").length>0&&(f=$(i).find("Columns")),f!==undefined&&(u="<script type='text/template' id='${name}'><tr class='item listDisplay'",o=0,_.each($(f).children(),function(n){o++,$(n).attr("width")>0&&(u+="<td><%=data["+o+"]%><\/td>")}),u+="<\/tr><\/script>",$("head").append(u))),s=[],$(i).find("Rows").length>0&&(h=$(i).find("Rows")),_.each($(h).children(),function(n){_.each($(n).children(),function(i){s.push({name:$(i).attr(t),category:$(n).attr(t),id:$(i).attr(r)})})}),e.kendoMobileListView({dataSource:kendo.data.DataSource.create({data:s,group:"category"}),template:"${name}",click:function(n){window.expanz.logToConsole(n.dataItem.id)}})},$(this).bind("publishData",f)},$.fn.KendoPanelBarAdapter=function(n){var i=$(this),o=!0,t="title",u="id",s=!0,r={},h=null,f=null,e=function(n,t,i){(o||i)&&n.itemSelected(t,h)},c;n&&(n.labelAttribute!==undefined&&(t=n.labelAttribute),n.idAttribute!==undefined&&(u=n.idAttribute),n.selectionCallback!==undefined&&(h=n.selectionCallback),n.onSelection!==undefined&&(e=n.onSelection),n.parentSelectable!==undefined&&(o=n.parentSelectable),n.expandedOnLoad!==undefined&&(s=n.expandedOnLoad),n.runAfterPublish!==undefined&&(f=n.runAfterPublish),n.staticElements!==undefined&&(r=n.staticElements)),c=function(n,o,h){window.expanz.logToConsole("KendoPanelBarAdapter publishData");var l=o,c=[],a="";$(o).find("Rows").length>0&&(o=$(o).find("Rows")),_.each($(o).children(),function(n){var f=$(n).attr(u),i={},r;i.text=$(n).attr(t),i.expanded=s,i.allAttributes=$(n).getAttributes(),r=[],_.each($(n).children(),function(n){a=n.tagName,r.push({text:$(n).attr(t),value:$(n).attr(u),allAttributes:$(n)})}),r.length>0&&(r.sort(getObjectSortAscendingFunction("text")),i.items=r),c.push(i)}),c.sort(getObjectSortAscendingFunction("text")),_.each(r,function(n){n.position!==undefined&&n.position=="end"?c.push({text:$(n).attr("label")}):c.unshift({text:$(n).attr("label")})}),i.kendoPanelBar({dataSource:c}),i.children("li").addClass("level1"),i.children("li").find("ul").children("li").addClass("level2"),i.data("kendoPanelBar").bind("select",function(n){var u=n.item.firstChild.textContent||n.item.firstChild.innerText,f=!1,i;r.length>0&&_.each(r,function(n){u===n.label&&(f=!0,expanz.net.MethodRequest(n.method,[{name:"contextObject",value:n.contextObject}],null,h.model.get("parent")))}),f||($(l).find("["+t+"]").each(function(){u===$(this).attr(t)&&(i=$(this))}),e&&e(h,i.attr("id"),i.is(a)))}),f&&f(l),$(this).trigger("dataPublished")},$(this).bind("publishData",c)},$.fn.KendoTimePickerAdapter=function(){var n=this.attr("timeFormat")!==undefined?this.attr("timeFormat"):window.config._timeFormat,t;n===undefined&&(n=12),t=$(this).kendoTimePicker({format:n==12?"h:mm tt":"H:mm"})},$.fn.KendoTreeAdapter=function(n){var t=$(this),l=!0,i="title",a="id",e=!0,r=[],o=!0,u={},s=null,y={success:function(){if(o){t.removeClass("treeSelectionLoading");var i="LoadingTree_"+t.attr("id"),n=$(t).find("#"+i);n&&n.hide()}s&&s.call()}},h=null,c=function(n,i,r){if((l||r)&&(n.itemSelected(i,y),o)){var f="LoadingTree_"+t.attr("id"),u=$(n.el).find("#"+f);u.length===0&&($(n.el).append('<div class="loading" id="'+f+'"><span> <\/span><\/div>'),u=$(n.el).find("#"+f)),u.css("position","absolute"),u.css("width","100%"),u.css("height","100%"),u.css("margin","0"),u.css("padding","0"),u.css("top","0px"),u.css("left","0px"),u.css("z-index","999"),u.css("overflow","hidden"),u.css("background","url(data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==) center"),u.show(),t.addClass("treeSelectionLoading")}},f=function(n,i,r){var u,f;i instanceof Array&&(i=str.join("|")),i===null||i===""?u=r:(f=new RegExp(i,"i"),u=[],_.each(r,function(n){var t={},i;t.text=n.text,t.expanded=n.expanded,i=[],_.each(n.items,function(n){n.text.match(f)&&i.push(n)}),i.length>0&&(t.items=i,u.push(t))})),t.html(""),t.removeClass("k-widget k-treeview k-reset"),t.kendoTreeView({dataSource:u})};n&&(n.labelAttribute!==undefined&&(i=n.labelAttribute),n.idAttribute!==undefined&&(a=n.idAttribute),n.selectionCallback!==undefined&&(s=n.selectionCallback),n.onSelection!==undefined&&(c=n.onSelection),n.parentSelectable!==undefined&&(l=n.parentSelectable),n.expandedOnLoad!==undefined&&(e=n.expandedOnLoad),n.filteringInput!==undefined&&(r=n.filteringInput),n.runAfterPublish!==undefined&&(h=n.runAfterPublish),n.filterData!==undefined&&(f=n.filterData),n.displayLoading!==undefined&&(o=n.displayLoading),n.staticElements!==undefined&&(u=n.staticElements));var v=function(n){var t=[];return _.each($(n).children(),function(n){var u={text:$(n).attr(i),value:$(n).attr(a),allAttributes:$(n).getAttributes(),expanded:e},r;$(n).attr("Type")=="parent"&&(r=v(n),r.length>0&&(u.items=r)),t.push(u)}),t},p=function(n){var t={text:$(n).attr(i),expanded:e,allAttributes:$(n).getAttributes()},r=v(n);return r.length>0&&(t.items=r),t},w=function(n,e,o){var v,y;window.expanz.logToConsole("KendoTreeAdapter publishData");var l=e,s=[],a="";$(e).find("Rows").length>0&&(e=$(e).find("Rows")),_.each($(e).children(),function(n){var t=p(n);a=n.tagName,s.push(t)}),_.each(u,function(n){n.position!==undefined&&n.position=="end"?s.push({text:$(n).attr("label")}):s.unshift({text:$(n).attr("label")})}),t.kendoTreeView({dataSource:s}),t.data("kendoTreeView").bind("select",function(n){var f=n.node.firstChild.textContent||n.node.firstChild.innerText,e=!1,r;u.length>0&&_.each(u,function(n){f===n.label&&(e=!0,expanz.net.MethodRequest(n.method,[{name:"contextObject",value:n.contextObject}],null,o.model.get("parent")),$(t).trigger("TreeSelectionChanged",{id:"static",text:f}))}),e||($(l).find("["+i+"]").each(function(){f===$(this).attr(i)&&(r=$(this))}),c&&c(o,r.attr("id"),!r.is(a)),$(t).trigger("TreeSelectionChanged",{id:r.attr("id"),text:f,parentId:r.parent().attr("id"),parentText:r.parent().attr(i)}))}),r&&r.length>0&&(v=function(n){f(n,$(this).val(),s)},y=function(n){f(n,$(this).attr("filter"),s)},_.each(r,function(n){$(n).is("input")?($(n).val(""),$(n).bind("change",v)):$(n).is("button")&&$(n).bind("click",y)})),h&&h(l)};$(this).bind("publishData",w),$(this).bind("filterData",f)};
//@ sourceMappingURL=expanz-kendoui-adapters.min.js.map