function useKendo(){useKendoPopups();if($("[bind=menu] > ul")){$("[bind=menu] > ul").kendoMenu()}window.expanz.Views.ContextMenuView.prototype.createContextMenu=function(){this.contextMenuEl.find("ul").kendoMenu({orientation:"vertical"});this.contextMenuEl.show()}}$.fn.KendoComboBoxAdapter=function(){var cb=$(this).kendoComboBox();var list=cb.data("kendoComboBox");var publishData=function(event,xml){var data=new Array();_.each($(xml).find("Row"),function(row){var rowId=$(row).attr("id");_.each($(row).find("Cell"),function(cell){data.push({text:$(cell).html(),value:rowId})})});var ds=new kendo.data.DataSource({data:data});list.dataSource=ds;ds.read();list.refresh();if(cb.val()!=undefined){list.value(cb.val())}};var onValueUpdated=function(event,newValue){list.value(newValue)};cb.bind("valueUpdated",onValueUpdated);cb.bind("publishData",publishData)};$.fn.KendoDropDownListAdapter=function(){var cb=$(this).kendoDropDownList();var list=cb.data("kendoDropDownList");var publishData=function(event,xml){var data=new Array();_.each($(xml).find("Row"),function(row){var rowId=$(row).attr("id");_.each($(row).find("Cell"),function(cell){data.push({text:$(cell).html(),value:rowId})})});var ds=new kendo.data.DataSource({data:data});list.dataSource=ds;ds.read();list.refresh();if(cb.val()!=undefined){list.value(cb.val())}};var onValueUpdated=function(event,newValue){list.value(newValue)};cb.bind("publishData",publishData);cb.bind("valueUpdated",onValueUpdated)};function useKendoPopups(){window.expanz.Views.PopupView.prototype.createWindowObject=function(){this.el.kendoWindow({visible:false,title:this.model.getAttr("title")?this.model.getAttr("title"):"",modal:true,width:this.width})},window.expanz.Views.PopupView.prototype.close=function(){this.el.data("kendoWindow").destroy()},window.expanz.Views.PopupView.prototype.center=function(){this.el.data("kendoWindow").center();this.el.data("kendoWindow").open()}}function createActivityWithKendoTabs(tabElement,ajaxTabContents,callbacks){var tabLoaded=new Array();var nbDynamicTabs=ajaxTabContents.length;var onContentLoad=function(e){tabLoaded[e.item.textContent]=true;if(Object.size(tabLoaded)==nbDynamicTabs){tabLoaded=new Array();expanz.CreateActivity($(e.item).parents("[bind=activity]"),callbacks)}};$(tabElement).kendoTabStrip({contentUrls:ajaxTabContents,contentLoad:onContentLoad});_.each(tabElement.data("kendoTabStrip").tabGroup.children().not("[class*=k-state-active]").not("[class*=k-tab-on-top]"),function(child){tabElement.data("kendoTabStrip").reload($(child))})}$.fn.KendoTreeAdapter=function(options){var treeView=$(this);var parentSelectable=true;var childType="File";var labelAttribute="title";var idAttribute="id";var expandedOnLoad=false;var selectionCallback=null;var onSelection=function(view,id,isChild){if(!parentSelectable&&!isChild){return }view.itemSelected(id,selectionCallback)};if(options){if(options.labelAttribute!=undefined){labelAttribute=options.labelAttribute}if(options.idAttribute!=undefined){idAttribute=options.idAttribute}if(options.selectionCallback!=undefined){selectionCallback=options.selectionCallback}if(options.onSelection!=undefined){onSelection=options.onSelection}if(options.parentSelectable!=undefined){parentSelectable=options.parentSelectable}if(options.expandedOnLoad!=undefined){expandedOnLoad=options.expandedOnLoad}}var publishData=function(event,xml,view){window.expanz.logToConsole("KendoTreeAdapter publishData");var xmlData=xml;var data=new Array();var childTag="";if($(xml).find("Rows").length>0){xml=$(xml).find("Rows")}_.each($(xml).children(),function(parentXml){var parentId=$(parentXml).attr(idAttribute);var parentObj=new Object();parentObj.text=$(parentXml).attr(labelAttribute);parentObj.expanded=expandedOnLoad;var items=new Array();_.each($(parentXml).children(),function(childXml){childTag=childXml.tagName;items.push({text:$(childXml).attr(labelAttribute),value:$(childXml).attr(idAttribute)})});if(items.length>0){parentObj.items=items}data.push(parentObj)});treeView.kendoTreeView({dataSource:data});treeView.data("kendoTreeView").bind("select",function(event){var elem=$(xmlData).find("["+labelAttribute+'="'+event.node.firstChild.textContent+'"]');if(onSelection){onSelection(view,elem.attr("id"),elem.is(childTag))}})};$(this).bind("publishData",publishData)};