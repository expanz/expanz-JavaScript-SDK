function useKendo(){expanz.UIplugin="kendo";renderKendoComponents();useKendoPopups();if($("[bind=menu] > ul")){$("[bind=menu] > ul").kendoMenu()}window.expanz.Views.ContextMenuView.prototype.createContextMenu=function(){this.contextMenuEl.find("ul").kendoMenu({orientation:"vertical"});this.contextMenuEl.show()}}function renderKendoComponents(A){if(A==null){A=$("body")}A.find("[renderingType=combobox]").KendoComboBoxAdapter();A.find("[renderingType='dropdownlist']").KendoDropDownListAdapter();if(A.find("[bind=menu] > ul")){A.find("[bind=menu] > ul").kendoMenu()}}$.fn.KendoComboBoxAdapter=function(){var A=$(this).kendoComboBox();var D=A.data("kendoComboBox");var C=function(F,E){var H=new Array();_.each($(E).find("Row"),function(J){var I=$(J).attr("id");_.each($(J).find("Cell"),function(K){H.push({text:$(K).html(),value:I})})});var G=new kendo.data.DataSource({data:H});D.dataSource=G;G.read();D.refresh();if(A.val()!=undefined){D.value(A.val())}};var B=function(E,F){D.value(F)};A.bind("valueUpdated",B);A.bind("publishData",C)};$.fn.KendoDropDownListAdapter=function(){var A=$(this).kendoDropDownList();var D=A.data("kendoDropDownList");var C=function(F,E){var H=new Array();_.each($(E).find("Row"),function(J){var I=$(J).attr("id");_.each($(J).find("Cell"),function(K){H.push({text:$(K).html(),value:I})})});var G=new kendo.data.DataSource({data:H});D.dataSource=G;G.read();D.refresh();if(A.val()!=undefined){D.value(A.val())}};var B=function(E,F){D.value(F)};A.bind("publishData",C);A.bind("valueUpdated",B)};function useKendoPopups(){window.expanz.Views.PopupView.prototype.createWindowObject=function(){this.el.kendoWindow({visible:true,title:this.model.getAttr("title")?this.model.getAttr("title"):"",modal:true,width:this.width})},window.expanz.Views.PopupView.prototype.close=function(){this.el.data("kendoWindow").destroy()},window.expanz.Views.PopupView.prototype.center=function(){this.el.data("kendoWindow").center();this.el.data("kendoWindow").open()}}function createActivityWithKendoTabs(C,B,D){var F=new Array();var A=B.length;var E=function(G){F[G.item.textContent]=true;if(Object.size(F)==A){F=new Array();expanz.CreateActivity($(G.item).parents("[bind=activity]"),D)}};$(C).kendoTabStrip({contentUrls:B,contentLoad:E});_.each(C.data("kendoTabStrip").tabGroup.children().not("[class*=k-state-active]").not("[class*=k-tab-on-top]"),function(G){C.data("kendoTabStrip").reload($(G))})}$.fn.KendoTreeAdapter=function(L){var D=$(this);var I=true;var E="File";var F="title";var H="id";var B=true;var K=[];var C=null;var A=function(N,O,M){if(!I&&!M){return }N.itemSelected(O,C)};if(L){if(L.labelAttribute!=undefined){F=L.labelAttribute}if(L.idAttribute!=undefined){H=L.idAttribute}if(L.selectionCallback!=undefined){C=L.selectionCallback}if(L.onSelection!=undefined){A=L.onSelection}if(L.parentSelectable!=undefined){I=L.parentSelectable}if(L.expandedOnLoad!=undefined){B=L.expandedOnLoad}if(L.filteringInput!=undefined){K=L.filteringInput}}var G=function(S,P,N){window.expanz.logToConsole("KendoTreeAdapter publishData");var R=P;var T=new Array();var O="";if($(P).find("Rows").length>0){P=$(P).find("Rows")}_.each($(P).children(),function(V){var X=$(V).attr(H);var W=new Object();W.text=$(V).attr(F);W.expanded=B;var U=new Array();_.each($(V).children(),function(Y){O=Y.tagName;U.push({text:$(Y).attr(F),value:$(Y).attr(H)})});if(U.length>0){W.items=U}T.push(W)});D.kendoTreeView({dataSource:T});D.data("kendoTreeView").bind("select",function(V){var U=$(R).find("["+F+'="'+V.node.firstChild.textContent+'"]');if(A){A(N,U.attr("id"),U.is(O))}});if(K&&K.length>0){var Q=function(U){J(U,$(this).val(),T)};var M=function(U){J(U,$(this).attr("filter"),T)};_.each(K,function(U){if($(U).is("input")){$(U).val("");$(U).bind("change",Q)}else{if($(U).is("button")){$(U).bind("click",M)}}})}};var J=function(P,O,Q){var N;if(O instanceof Array){O=str.join("|")}if(O==null||O==""){N=Q}else{var M=new RegExp(O,"i");var N=new Array();_.each(Q,function(R){var T=new Object();T.text=R.text;T.expanded=R.expanded;var S=new Array();_.each(R.items,function(U){if(U.text.match(M)){S.push(U)}});if(S.length>0){T.items=S;N.push(T)}})}D.html("");D.removeClass("k-widget k-treeview k-reset");D.kendoTreeView({dataSource:N})};$(this).bind("publishData",G);(this).bind("filterData",J)};